# ğŸš€ MLå­¦ç¿’å¼·åŒ–ï¼šè¤‡åˆãƒ‘ã‚¿ãƒ¼ãƒ³ç™ºè¦‹æ©Ÿèƒ½ã®è¿½åŠ 

## ğŸ“‹ æ¦‚è¦

MACDã€ä¸€ç›®å‡è¡¡è¡¨ã€ç§»å‹•å¹³å‡ç·šã‚’ä½¿ã£ãŸ**è¤‡åˆãƒ‘ã‚¿ãƒ¼ãƒ³ç™ºè¦‹æ©Ÿèƒ½**ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ã€ŒMACDã‚¯ãƒ­ã‚¹æ™‚ã®RSI 30-40ã®BUYãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã®ã‚ˆã†ãªè©³ç´°ãªåˆ†æãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

## ğŸ¯ è¿½åŠ ã•ã‚Œã‚‹è¤‡åˆãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. **MACD x RSI ãƒ‘ã‚¿ãƒ¼ãƒ³**
ä¾‹: `USDJPY_H1_BUY_MACD_bullish_RSI_oversold`
- MACDãŒå¼·æ°—ã‚¯ãƒ­ã‚¹ + RSI 30æœªæº€ï¼ˆè²·ã‚ã‚Œã™ãï¼‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³

### 2. **ä¸€ç›®TKã‚¯ãƒ­ã‚¹ x RSI ãƒ‘ã‚¿ãƒ¼ãƒ³**
ä¾‹: `XAUUSD_M15_SELL_ICHIMOKU_TK_bearish_tk_RSI_overbought`
- ä¸€ç›®ã®è»¢æ›ç·šãŒåŸºæº–ç·šã‚’ä¸‹æŠœã‘ + RSI 70è¶…ï¼ˆå£²ã‚‰ã‚Œã™ãï¼‰

### 3. **ä¸€ç›®é›² x MACDã‚¯ãƒ­ã‚¹ ãƒ‘ã‚¿ãƒ¼ãƒ³**
ä¾‹: `USDJPY_H1_BUY_CLOUD_bullish_cloud_MACD_bullish`
- ä¸€ç›®ã®é›²ãŒé™½è»¢ + MACDãŒå¼·æ°—ã‚¯ãƒ­ã‚¹

### 4. **ç§»å‹•å¹³å‡ã‚¯ãƒ­ã‚¹ x RSI ãƒ‘ã‚¿ãƒ¼ãƒ³**
ä¾‹: `XAUUSD_M15_BUY_MA_bullish_ma_RSI_neutral_low`
- EMA25 > SMA100 + RSI 30-45

### 5. **ãƒˆãƒªãƒ—ãƒ«ç¢ºèªãƒ‘ã‚¿ãƒ¼ãƒ³**
ä¾‹: `USDJPY_H1_BUY_TRIPLE_bullish_bullish_tk_bullish_ma`
- MACD + ä¸€ç›®TK + MA ã®3ã¤å…¨ã¦ãŒå¼·æ°—ä¸€è‡´

## ğŸ“Š å‰Šé™¤ã•ã‚ŒãŸã‚«ãƒ©ãƒ 

ä»¥ä¸‹ã®ã‚«ãƒ©ãƒ ã¯MLå­¦ç¿’ã§ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ãŸã‚å‰Šé™¤ã•ã‚Œã¾ã™ï¼š
- âŒ `ea_dir` - EAå´ã®æ–¹å‘åˆ¤æ–­ï¼ˆå‚è€ƒæƒ…å ±ã€å­¦ç¿’ã«ä¸è¦ï¼‰
- âŒ `ea_reason` - EAå´ã®ç†ç”±ï¼ˆå‚è€ƒæƒ…å ±ã€å­¦ç¿’ã«ä¸è¦ï¼‰
- âŒ `ea_ichimoku_score` - EAå´ã®ä¸€ç›®ã‚¹ã‚³ã‚¢ï¼ˆå‚è€ƒæƒ…å ±ã€å­¦ç¿’ã«ä¸è¦ï¼‰

## âœ… è¿½åŠ ã•ã‚ŒãŸã‚«ãƒ©ãƒ ï¼ˆãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ï¼‰

### ä¾¡æ ¼æƒ…å ±
- `bid` - è²·å€¤
- `ask` - å£²å€¤

### ç§»å‹•å¹³å‡ç·š
- `ema_25` - 25æœŸé–“EMA
- `sma_100` - 100æœŸé–“SMA
- `ma_cross` - ã‚¯ãƒ­ã‚¹çŠ¶æ…‹ï¼ˆ1=å¼·æ°—, -1=å¼±æ°—ï¼‰

### MACDæŒ‡æ¨™
- `macd_main` - MACDãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³
- `macd_signal` - MACDã‚·ã‚°ãƒŠãƒ«ãƒ©ã‚¤ãƒ³
- `macd_histogram` - MACDãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ 
- `macd_cross` - ã‚¯ãƒ­ã‚¹çŠ¶æ…‹ï¼ˆ1=å¼·æ°—, -1=å¼±æ°—ï¼‰

### ä¸€ç›®å‡è¡¡è¡¨
- `ichimoku_tenkan` - è»¢æ›ç·š
- `ichimoku_kijun` - åŸºæº–ç·š
- `ichimoku_senkou_a` - å…ˆè¡Œã‚¹ãƒ‘ãƒ³A
- `ichimoku_senkou_b` - å…ˆè¡Œã‚¹ãƒ‘ãƒ³B
- `ichimoku_chikou` - é…è¡Œã‚¹ãƒ‘ãƒ³
- `ichimoku_tk_cross` - TKã‚¯ãƒ­ã‚¹ï¼ˆ1=å¼·æ°—, -1=å¼±æ°—ï¼‰
- `ichimoku_cloud_color` - é›²ã®è‰²ï¼ˆ1=é™½è»¢, -1=é™°è»¢ï¼‰
- `ichimoku_price_vs_cloud` - ä¾¡æ ¼ã¨é›²ã®ä½ç½®ï¼ˆ1=ä¸Š, -1=ä¸‹, 0=ä¸­ï¼‰

## ğŸ”§ ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

Supabase Dashboard SQL Editorã§å®Ÿè¡Œï¼š
https://supabase.com/dashboard/project/nebphrnnpmuqbkymwefs/sql/new

```bash
cat supabase/migrations/20251029_002_optimize_ai_signals_columns.sql
```

### 2. Edge Functionså†ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# ai-signals Edge Functionï¼ˆãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ä¿å­˜ï¼‰
cd /workspaces/ai-trader-supabase
supabase functions deploy ai-signals

# ml-training Edge Functionï¼ˆè¤‡åˆãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’ï¼‰
supabase functions deploy ml-training
```

### 3. MT5 EAã®å†èµ·å‹•

MT5ã§EAã‚’ä¸€åº¦åœæ­¢ã—ã¦å†èµ·å‹•ï¼ˆã‚³ãƒ¼ãƒ‰ã¯å¤‰æ›´ãªã—ã€æ¬¡ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‹ã‚‰æ–°ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã‚‹ï¼‰

## ğŸ“ˆ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### å¾“æ¥ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰:
- `USDJPY_H1_BUY_RSI_oversold` â†’ RSI 30æœªæº€ã®BUYãƒ‘ã‚¿ãƒ¼ãƒ³
- å‹ç‡: 55%ã€ã‚µãƒ³ãƒ—ãƒ«: 20ä»¶

### æ–°æ©Ÿèƒ½ï¼ˆè¤‡åˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰:
- `USDJPY_H1_BUY_MACD_bullish_RSI_oversold` â†’ MACDã‚¯ãƒ­ã‚¹ + RSI 30æœªæº€
- å‹ç‡: 72%ã€ã‚µãƒ³ãƒ—ãƒ«: 8ä»¶ï¼ˆã‚ˆã‚Šé«˜ç²¾åº¦ã€ã‚µãƒ³ãƒ—ãƒ«ã¯å°‘ãªã„ï¼‰

- `USDJPY_H1_BUY_TRIPLE_bullish_bullish_tk_bullish_ma` â†’ 3ã¤ã®æŒ‡æ¨™ãŒå…¨ã¦ä¸€è‡´
- å‹ç‡: 85%ã€ã‚µãƒ³ãƒ—ãƒ«: 5ä»¶ï¼ˆæœ€ã‚‚é«˜ç²¾åº¦ã€ãƒ¬ã‚¢ï¼‰

## ğŸ§ª æ¤œè¨¼æ–¹æ³•

æ¬¡ã®MLå­¦ç¿’å®Ÿè¡Œå¾Œã€ä»¥ä¸‹ã®ã‚¯ã‚¨ãƒªã§è¤‡åˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¢ºèªï¼š

```sql
-- è¤‡åˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¢ºèª
SELECT 
  pattern_name,
  pattern_type,
  total_trades,
  win_rate,
  profit_factor,
  confidence_score
FROM ml_patterns
WHERE pattern_type LIKE 'composite%'
  AND sample_size_adequate = true
ORDER BY win_rate DESC, total_trades DESC
LIMIT 20;

-- æœ€ã‚‚é«˜ç²¾åº¦ãªãƒˆãƒªãƒ—ãƒ«ç¢ºèªãƒ‘ã‚¿ãƒ¼ãƒ³
SELECT 
  pattern_name,
  win_rate,
  total_trades,
  avg_profit,
  profit_factor
FROM ml_patterns
WHERE pattern_type = 'composite_triple_confirm'
  AND win_rate > 0.70
ORDER BY win_rate DESC;
```

## ğŸ“š é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- `supabase/migrations/20251029_002_optimize_ai_signals_columns.sql` - ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´
- `supabase/functions/ai-signals/index.ts` - ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ä¿å­˜
- `supabase/functions/ml-training/index.ts` - è¤‡åˆãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’
- `DATABASE_STRUCTURE.md` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆè¦æ›´æ–°ï¼‰

---

**ä½œæˆæ—¥**: 2025å¹´10æœˆ29æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.0.0 (Composite Pattern Discovery)
